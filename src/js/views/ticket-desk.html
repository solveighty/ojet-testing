<!-- src/js/views/ticket-desk.html -->

<!-- ðŸŽ¨ TAB BAR CONTAINER - Contenedor con fondo neutro para la barra de tabs -->
<div class="oj-flex oj-sm-padding-2x-bottom oj-sm-padding-4x-left oj-sm-padding-4x-right tabbar-container">
  <!-- ðŸŽ¯ CONVEYOR BELT - Envolvimiento de tab-bar para scroll horizontal -->
  <oj-conveyor-belt class="oj-sm-9">
    <!-- ðŸŽ¯ TAB BAR - Barra de pestaÃ±as con listener de cambio de selecciÃ³n -->
    <oj-tab-bar
      contextmenu="tabmenu"
      id="ticket-tab-bar"
      selection="{{selectedTabItem}}"
      edge="top"
      data="[[tabBarDataSource]]"
      item.renderer="[[oj.KnockoutTemplateUtils.getRenderer('tab-template', true)]]"
      on-oj-remove="[[onTabRemove]]"
      on-selection-changed="[[tabSelectionChanged]]"
      class="oj-sm-12 oj-sm-condense">
      <oj-menu slot="contextMenu" style="display:none" aria-label="Actions">
        <oj-option data-oj-command="oj-tabbar-remove">
          Removable
        </oj-option>
      </oj-menu>
    </oj-tab-bar>
  </oj-conveyor-belt>
</div>

<script type="text/html" id="tab-template">
  <li class="oj-removable" data-bind="css:{'oj-disabled': $data['disabled'] == 'true'}">
    <a href="#">
      <oj-bind-text value="[[name]]"></oj-bind-text>
    </a>
  </li>
</script>

<div class="oj-flex oj-sm-flex-direction-row oj-sm-padding-4x oj-sm-column-gap-4x">

  <!-- ðŸŽ¨ LEFT COLUMN CONTAINER - Columna izquierda con sombra -->
  <!-- ============================= -->
  <!-- COLUMNA IZQUIERDA: LISTA DE TICKETS -->
  <!-- ============================= -->
  <div class="oj-flex-item oj-sm-12 oj-md-5 oj-lg-5 oj-sm-padding-4x left-column-container">

    <!-- ðŸ” Campo de bÃºsqueda -->
    <oj-input-text
      id="searchField"
      placeholder="Search tickets..."
      value="{{searchValue}}"
      class="oj-sm-margin-4x-bottom oj-sm-margin-4x-top"
      style="width: 100%;">
    </oj-input-text>

    <!-- ðŸ“‹ LIST VIEW CONTAINER - Contenedor con altura dinÃ¡mica -->
    <div class="oj-flex list-view-container">
      <!-- ðŸ“‹ Lista de tickets -->
      <!-- ðŸŽ¯ SELECTION CHANGED - Evento para cuando cambia la selecciÃ³n -->
      <oj-list-view
        id="ticketList"
        data="[[ticketDataProvider]]"
        selection-mode="single"
        selection="{{selectedTicket}}"
        on-selection-changed="[[listSelectionChanged]]"
        aria-label="Ticket List"
        class="oj-sm-margin-2x-top ticket-list"
        style="width: 100%;">

        <template slot="itemTemplate" data-oj-as="item">
          <li class="ticket-item oj-sm-padding-2x oj-flex oj-sm-flex-direction-column">
            <!-- LÃ­nea 1: ID y fecha -->
            <div class="oj-flex oj-sm-justify-content-space-between oj-sm-margin-1x-bottom">
              <div>
                <strong>Ticket ID:</strong>
                <oj-bind-text value="[[item.data.id]]"></oj-bind-text>
              </div>
              <div class="oj-text-secondary-color">
                <oj-bind-text value="[[item.data.dateCreated]]"></oj-bind-text>
              </div>
            </div>

            <!-- LÃ­nea 2: TÃ­tulo -->
            <div class="oj-text-primary-color oj-sm-margin-1x-bottom">
              <oj-bind-text value="[[item.data.title]]"></oj-bind-text>
            </div>

            <!-- LÃ­nea 3: Estado y prioridad -->
            <div class="oj-flex oj-sm-justify-content-space-between">
              <div>
                <strong>Status:</strong>
                <oj-bind-text value="[[item.data.status]]"></oj-bind-text>
              </div>
              <div class="oj-text-secondary-color">
                <oj-bind-text value="[[item.data.priority]]"></oj-bind-text>
              </div>
            </div>
          </li>
        </template>
      </oj-list-view>
    </div>

  </div>

  <!-- ============================= -->
  <!-- COLUMNA DERECHA: DETALLE -->
  <!-- ============================= -->
  <div class="oj-flex-item oj-sm-12 oj-md-7 oj-lg-7 oj-sm-padding-4x">
    
    <!-- ðŸŽ¯ SELECTED TICKET VIEW - MÃ³dulo para visualizar ticket seleccionado -->
    <!-- ðŸŽ¯ CONDITIONAL RENDERING - Solo mostrar si hay ticket seleccionado -->
    <div data-bind="if: selectedTicketModel">
      <div data-bind="ojModule: { name: 'view-ticket', params: { ticketModel: selectedTicketModel } }">
      </div>
    </div>
    <!-- ðŸŽ¯ SELECTED TICKET VIEW -->
    
    <!-- ðŸŽ¯ NO SELECTION MESSAGE - Mensaje cuando no hay ticket seleccionado -->
    <div data-bind="ifnot: selectedTicketModel" class="oj-sm-padding-4x">
      <h3>Select a ticket...</h3>
      <p class="oj-text-secondary-color">
        Ticket content goes here â€” this area will be used for details in later chapters.
      </p>
    </div>

  </div>

</div>

